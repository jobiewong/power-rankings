<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Power Rankings</title>
    <link rel="stylesheet" href="index.css" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,900;1,100;1,300;1,400;1,500;1,900&display=swap');
      </style> 
  </head>
  <body>
      <div class="header-wrapper">
        <h1 class="title-name">Platchat Valorant</h1>
        <div class="divider"></div>
        <h2 class="title-power">Power Rankings</h2>
      </div>

      <div class="settings-container hidden">
        <div class="close-button" id="closebutton"></div>
        <h1>Add Team</h1>
        <form class="team-form">
          <label>Team Name</label>
          <input type="text" id="tname" name="teamname" placeholder="Team Name">
          <label>Text Colour</label>
          <input type="text" id="tcolour" name="textcolour" placeholder="#1111">
          <label>Background Colour</label>
          <input type="text" id="bcolour" name="bgcolur" placeholder="#FFF">
          <label>Team Logo</label>
          <input type="file" id="logofile" name="logo_file" class="file-input" accept=".jpg, .jpeg, .png">
          <input type="button" value="Submit">
        </form>
        <img id="outImage">
      </div>

      <div class="container">
        <div class="numbers">
          <div class="number-wrapper">1</div>
          <div class="number-wrapper">2</div>
          <div class="number-wrapper">3</div>
          <div class="number-wrapper">4</div>
          <div class="number-wrapper">5</div>
          <div class="number-wrapper">6</div>
          <div class="number-wrapper">7</div>
          <div class="number-wrapper">8</div>
          <div class="number-wrapper">9</div>
          <div class="number-wrapper">10</div>
        </div>

        <div class="wrapper" id="wrapperid">
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Otpic Gaming</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Cloud 9 Blue</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>The Guard</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>XSET</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Faze</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Version1</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Sentinels</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Knights</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>NRG</span></div>
          </div>
          <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>Luminosity</span></div>
          </div>
        </div>

        <div class="overflow-wrapper" id="overflowwrapper">
          <!-- <div class="item">
            <div class="item-logo"></div>
            <div class="item-text"><span>GenG</span></div>
          </div> -->
        </div>
      </div>

      <div class="add-button" id="addbutton" type="button">Add Team</div>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>      

      <script>
        var dragArea = document.querySelector(".wrapper");
        new Sortable (dragArea, {
          group: {
            name: 'mainlist',
            put: function(to) {
              return to.el.children.length == 9;
            }   
          },
          animation: 300,
       
        })

        var dragAreaOverflow = document.querySelector(".overflow-wrapper");
        new Sortable (dragAreaOverflow, {
          group: {
            name: 'overflowlist',
            put: 'mainlist'
          },
          animation: 300,
          removeOnSpill: true, // Enable plugin
          // Called when item is spilled
          onSpill: function(/**Event*/evt) {
            evt.item // The spilled item
          }
        })
      </script>

      <script type="text/javascript">
        $("#addbutton").click(function () {
          $(".settings-container").removeClass('hidden');
          $(".settings-container").addClass('show');
        });

        $("#closebutton").click(function () {
          $(".settings-container").removeClass('show');
          $(".settings-container").addClass('hidden');
          });
      </script>

      <script>
          document.getElementById('logofile').addEventListener('change', readURL, true);
          function readURL(){
            var file = document.getElementById("logofile").files[0];
            var reader = new FileReader();
            reader.onloadend = function(){
                logoFile = "url(" + reader.result + ")";        
            }
            if(file){
                reader.readAsDataURL(file);
              }else{
              }
          }

          function addTeam(file) {
          var t_input = document.getElementById("tname"); 
          var teamname = t_input.value.trim(); 

          var c_input = document.getElementById("tcolour"); 
          var textcolour = c_input.value.trim(); 

          var bg_input = document.getElementById("bcolour"); 
          var backgroundcolour = bg_input.value.trim(); 
       
          const itemDiv = document.createElement("div");
          itemDiv.className = "item";
          const itemLogo = document.createElement("div");
          itemLogo.className = "item-logo";
          const itemText = document.createElement("div");
          itemText.className = "item-text";

          itemDiv.appendChild(itemLogo)
          itemDiv.appendChild(itemText)
          itemText.innerText = teamname;
          itemText.style.color = textcolour;
          itemDiv.style.backgroundColor = backgroundcolour;
          itemLogo.style.backgroundImage = file;

          document.getElementById("overflowwrapper").appendChild(itemDiv);

          $(".settings-container").removeClass('show');
          $(".settings-container").addClass('hidden');
        }

        var button = document.querySelector('input[type="button"]');
        button.addEventListener('click',function(){addTeam(logoFile)},false);
      </script>
  </body>
</html>